---
layout: post
title: Lagotto 4.1 released
tags: [releases]
category: blog
authors:
 - surname: Fenner
   given-names: Martin
   orcid: http://orcid.org/0000-0003-1419-2405
   email: mfenner@plos.org
---

[Lagotto 4.1](https://github.com/lagotto/lagotto/releases/tag/v.4.1) was released on June 17, 2015 with the following changes:

* refactored `/heartbeat` endpoint to use sinatra so that it works if the database is down ([#302](https://github.com/lagotto/lagotto/issues/302))
* fixed a bug in source and publisher caching ([#306](https://github.com/lagotto/lagotto/issues/306))
* upgraded source to use v.1.2 ORCID API ([#308](https://github.com/lagotto/lagotto/issues/308))
* fetch metadata from pubmed if there is a pmid but no doi ([#309](https://github.com/lagotto/lagotto/issues/309))
* added recommendations, similar works that are also tracked ([#310](https://github.com/lagotto/lagotto/issues/310))
* use CrossRef REST API for metadata of articles fetched via CrossRef CitedBy ([#312](https://github.com/lagotto/lagotto/issues/312))
* use CrossRef date indexed if date issued is in the future ([#314](https://github.com/lagotto/lagotto/issues/314))
* pass member id as integer to CrossRef REST API, fixing a CrossRef import issue ([#320](https://github.com/lagotto/lagotto/issues/320))
* optionally serve v3 API responses for single works as array for backward compatibility ([#321](https://github.com/lagotto/lagotto/issues/321))
* upgraded capistrano gem, use capistrano-passenger ([#323](https://github.com/lagotto/lagotto/issues/323))
* workaround to support 4-byte utf-8 characters, e.g. emojis ([#324](https://github.com/lagotto/lagotto/issues/324))
* allow update of works on import ([#325](https://github.com/lagotto/lagotto/issues/325))
* added optional Bugsnag error tracking, using two `ENV` variables ([#326](https://github.com/lagotto/lagotto/issues/326))
* use different path for RSS urls rather than file extension `.rss` ([#328](https://github.com/lagotto/lagotto/issues/328))
* handle timeout errors more gracefully ([#330](https://github.com/lagotto/lagotto/issues/330))
* avoid ActiveRecord connection pool issues ([#331](https://github.com/lagotto/lagotto/issues/331))
* automatically track metrics for works from article_coverage_curated source ([#332](https://github.com/lagotto/lagotto/issues/332))
* use http://doi.org instead of http://dx.doi.org for encoding DOIs as URLs ([#333](https://github.com/lagotto/lagotto/issues/333))
* use http URI of the primary identifier as the PID in the API ([#334](https://github.com/lagotto/lagotto/issues/334))
* automatically track metrics for blog posts referencing a work ([#335](https://github.com/lagotto/lagotto/issues/335))
* automatically track metrics for works mentioned in the body of another work, using the sources `europe_pmc_fulltext`, `plos_fulltext` and `bmc_fulltext` ([#336](https://github.com/lagotto/lagotto/issues/336))

This release includes numerous other small bug fixes. While the release fixes on bug fixes, new features were also introduced:

### Recommendations

A list of similar works that we also track, generated by common relations, e.g. other works tracked by Lagotto cited
by the same paper or bookmarked in the same ORCID profile. Available in the v6 API, e.g. [here](http://alm.plos.org/api/works/doi:10.1371/journal.pmed.1000097/recommendations).

### Identifiers as URIs

Starting with this release, the `id` for a work in the v6 API will always be a URL, e.g. `http://doi.org/10.1371/journal.pmed.1000097`, and the use of `dx.doi.org` has been
changed to `doi.org` in all places.

### Second-order Events

Lagotto 4.1 adds support for second-order events, i.e. it will track news items and blog posts that discuss a work in Lagotto.
We do the same for scholarly articles that mention a tracked work in the body text (where we can search the fulltext), e.g. informal citations to datasets.
